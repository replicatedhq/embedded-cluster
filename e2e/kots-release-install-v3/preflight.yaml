apiVersion: v1
kind: ConfigMap
metadata:
  name: preflight-configmap
data:
  preflight.yaml: |
    apiVersion: troubleshoot.sh/v1beta2
    kind: Preflight
    metadata:
      name: preflight-checks
    spec:
      collectors:
        - clusterInfo: {}
        - clusterResources: {}
      analyzers:
        - customResourceDefinition:
            customResourceDefinitionName: volumesnapshots.snapshot.storage.k8s.io
            checkName: The Volume Snapshots CRD exists
            outcomes:
              - fail:
                  message: The Volume Snapshots CRD does not exist.
              - pass:
                  message: The Volume Snapshots CRD exists.
