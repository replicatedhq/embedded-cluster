version: v1
resourceModifierRules:
- conditions:
    groupResource: statefulsets.apps
    resourceNameRegex: "^kotsadm-rqlite$"
    namespaces:
    - kotsadm
  patches:
  - operation: replace
    path: "/spec/replicas"
    value: 1
  - operation: replace
    path: "/spec/template/spec/containers/0/args/2"
    value: "-bootstrap-expect=1"
- conditions:
    groupResource: services
    resourceNameRegex: "^registry$"
    namespaces:
    - registry
  patches:
  - operation: replace
    path: "/spec/clusterIP"
    value: "__REGISTRY_SERVICE_IP__"
- conditions:
    groupResource: services
    resourceNameRegex: "^ec-seaweedfs-s3$"
    namespaces:
    - seaweedfs
  patches:
  - operation: replace
    path: "/spec/clusterIP"
    value: "__SEAWEEDFS_S3_SERVICE_IP__"
