---
description: 
globs: 
alwaysApply: false
---
# Installation Config vs Runtime Config

Simple actionable rules for working with configs in Embedded Cluster.

> **ðŸ“– Architecture Details**: See `/design/installation-vs-runtime-config.md` for comprehensive design documentation.

## When to Use Each

- **Installation Config**: User input and preferences during installation
- **Runtime Config**: System state and environment variables during cluster lifetime

## Data Flow Rule
```
User Input â†’ Installation Config â†’ Runtime Config â†’ System Environment
```

## Actionable Rules

### Adding New User Options
1. Add field to `types.InstallationConfig` 
2. Add validation in installation manager with user-friendly error messages
3. Transform to runtime config in controller
4. Apply to environment via `SetEnv()` and persist via `WriteToDisk()`

### Configuration Updates
Follow this order:
1. Validate user input (Installation Config)
2. Store installation config (in-memory)
3. Transform to runtime config (system state)
4. Apply environment changes
5. Persist to disk

### Validation Guidelines
- **Installation Config**: User-friendly error messages using `types.NewAPIError()`
- **Runtime Config**: System constraint checking with standard errors

